version: "3.9"

services:

db:
 build: 
  context: ./requierments/mariadb
 conatainer_name: mariadb
 restart: on-failure
 environement:
  MARIADB_ROOT_PASSWORD: ...
  MARIADB_ROOT_HOST: ...
  MARIADB_DATABASE: ...
 env_files: .env
 volumes:
  - /tmp/db-wordpress:/var/www/html
#  - 
 ports:
   - "3306:3306"
 networks:
  - 42networks

web:
 build: 
  context: ./requierments/nginx
 container_name: nginx
 depends_on:
  - wordpress.
 environement:
  - NGINX_HOST=tpaquier.42.fr
 restart: on-failure
 env_files: .env
 volumes:
  - wordpress:/var/www/html
 networks:
  - 42networks

wordpress:
 build: 
  context: ./requierments/wordpress
 container_name: wordpress
 depends_on:
  - db
 restart: on-failure
 environement:
  WORDPRESS_DB_HOST: db:3306
  WORDPRESS_DB_PASSWORD: password
  WORDPRESS_DB_USER: ...
  WORDPRESS_DB_NAME: ...
  WORDPRESS_TABLE_PREFIX: ...
 # all wp env meme que la db
 env_files: .env
 volumes:
  - wordpress:/var/www/html
  - /tmp/db-wordpress:/var/www/html
 networks:
  - 42networks

networks:
 42networks:

volume:

 db:
  driver:
  driver_opts:
   type:
   O:
   device:

 wordpress:
  driver:
  driver_opts:
   type:
   O:
   device: